<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Order Item Form</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">



<form th:object="${orderItem}" method="post" class="mt-3">
    <h2 th:text="*{order_detail_id} == null ? 'Thêm Order Item' : 'Sửa Order Item'"></h2>

    <!-- ID ẩn -->
    <input type="hidden" th:field="*{order_detail_id}" />

    <!-- Chọn Order -->
    <div class="mb-3">
        <label class="form-label">Order</label>
        <!-- LƯU Ý: dùng order.order_id (snake_case) đúng theo entity `order` -->
        <select class="form-select" th:field="*{order.order_id}" required>
            <option value="" disabled selected>-- Chọn Order --</option>
            <option th:each="o : ${orders}"
                    th:value="${o.order_id}"
                    th:text="|Order #${o.order_id}|">
            </option>
        </select>
    </div>

    <!-- Chọn Product -->
    <div class="mb-3">
        <label class="form-label">Product</label>
        // sủaw
         product.product_id theo entity Product
        <select class="form-select" th:field="*{product.productId}" required>
            <option value="" disabled selected>-- Chọn Product --</option>
            <option th:each="p : ${products}"
                    th:value="${p.productId}"
                    th:text="${p.productName != null ? p.productName : p.product_name}">
            </option>
        </select>
    </div>

    <!-- Số lượng -->
    <div class="mb-3">
        <label class="form-label">Quantity</label>
        <input type="number" class="form-control" th:field="*{quantity}" min="1" required>
    </div>

    <!-- Giá tại thời điểm đặt (map vào field `price`, cột DB `price_at_order`) -->
    <div class="mb-3">
        <label class="form-label">Price at order</label>
        <input type="number" step="0.01" class="form-control" th:field="*{price}" required>
    </div>

    <button type="submit" class="btn btn-primary">Lưu</button>
    <a th:href="@{/order-items/list}" class="btn btn-secondary">Hủy</a>
</form>

<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

